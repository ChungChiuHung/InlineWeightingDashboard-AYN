{% extends "base.html" %}

{% block content %}
<!-- Status & Key Metrics Row -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    
    <!-- MACHINE STATUS CARD -->
    <div id="card-status" class="rounded-lg shadow-md p-6 flex flex-col justify-between transition-colors duration-500 bg-white border-l-8 border-gray-300">
        <div class="flex justify-between items-start">
            <h2 class="text-sm font-semibold uppercase tracking-widest opacity-80">Machine Status</h2>
            <i class="fa-solid fa-microchip text-2xl opacity-50"></i>
        </div>
        <div class="mt-4">
            <span id="val-status" class="text-4xl font-black tracking-tight">WAITING...</span>
        </div>
        <div class="mt-2 text-xs opacity-75">
            Mode: <span id="val-mode">AUTO</span>
        </div>
    </div>

    <!-- CURRENT WEIGHT CARD -->
    <div class="bg-white rounded-lg shadow-md p-6 border-l-8 border-blue-500 flex flex-col justify-between">
        <div class="flex justify-between items-start">
            <h2 class="text-gray-500 text-sm font-semibold uppercase tracking-widest">Current Weight</h2>
            <i class="fa-solid fa-scale-balanced text-blue-300 text-2xl"></i>
        </div>
        <div class="mt-4">
            <span id="val-weight" class="font-mono text-5xl font-bold text-gray-800">0.00</span>
            <span class="text-xl text-gray-500 ml-1">kg</span>
        </div>
        <div class="mt-2 text-xs text-gray-400">
            Sensor: Mettler Toledo
        </div>
    </div>

    <!-- FISH CATEGORY CARD -->
    <div class="bg-white rounded-lg shadow-md p-6 border-l-8 border-purple-500 flex flex-col justify-between">
        <div class="flex justify-between items-start">
            <h2 class="text-gray-500 text-sm font-semibold uppercase tracking-widest">Current Batch</h2>
            <i class="fa-solid fa-fish text-purple-300 text-2xl"></i>
        </div>
        <div class="mt-4">
            <div id="val-fish-name" class="text-3xl font-bold text-gray-800">---</div>
            <div class="text-sm text-gray-400 font-mono mt-1">Code: <span id="val-fish-code">----</span></div>
        </div>
        <a href="/ui/categories" class="mt-2 text-xs text-purple-600 font-semibold hover:underline block">
            <i class="fa-solid fa-gear mr-1"></i>Configure Categories
        </a>
    </div>
</div>

<!-- Charts Row -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Real-time Weight Trend -->
    <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-gray-600 font-bold mb-4 text-sm border-b pb-2">
            <i class="fa-solid fa-chart-line mr-2"></i>Real-time Throughput (Last 1 min)
        </h3>
        <div class="relative h-64 w-full">
            <canvas id="weightChart"></canvas>
        </div>
    </div>

    <!-- Production Stats -->
    <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-gray-600 font-bold mb-4 text-sm border-b pb-2">
            <i class="fa-solid fa-chart-pie mr-2"></i>Production Count (Today)
        </h3>
        <div class="relative h-64 w-full flex justify-center">
            <canvas id="productionChart"></canvas>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="/static/js/dashboard.js"></script>
{% endblock %}